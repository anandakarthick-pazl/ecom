<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dropdown Test</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-5">
        <h1>Dropdown Test Page</h1>
        
        <div class="d-flex gap-2 align-items-center mb-4">
            <button class="btn btn-primary">Regular Button</button>
            
            <!-- Test Dropdown 1 - Basic Bootstrap -->
            <div class="dropdown">
                <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                    Basic Dropdown
                </button>
                <ul class="dropdown-menu">
                    <li><a class="dropdown-item" href="#">Action</a></li>
                    <li><a class="dropdown-item" href="#">Another action</a></li>
                    <li><a class="dropdown-item" href="#">Something else here</a></li>
                </ul>
            </div>
            
            <!-- Test Dropdown 2 - Bulk Upload Style -->
            <div class="btn-group dropdown">
                <button type="button" class="btn btn-success dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false" id="bulk-upload-test">
                    <i class="fas fa-upload"></i> Bulk Upload Test
                </button>
                <ul class="dropdown-menu" aria-labelledby="bulk-upload-test">
                    <li><a class="dropdown-item" href="#">
                        <i class="fas fa-upload"></i> Upload Products
                    </a></li>
                    <li><a class="dropdown-item" href="#">
                        <i class="fas fa-download"></i> Download Template
                    </a></li>
                    <li><a class="dropdown-item" href="#">
                        <i class="fas fa-history"></i> Upload History
                    </a></li>
                </ul>
            </div>
        </div>
        
        <div class="alert alert-info">
            <h5>Debugging Information:</h5>
            <div id="debug-info">
                <p>Bootstrap version: <span id="bootstrap-version">Loading...</span></p>
                <p>jQuery version: <span id="jquery-version">Loading...</span></p>
                <p>Dropdown component: <span id="dropdown-component">Loading...</span></p>
            </div>
        </div>
        
        <div class="card">
            <div class="card-header">
                <h5>Console Output</h5>
            </div>
            <div class="card-body">
                <pre id="console-output" style="height: 200px; overflow-y: auto; background: #f8f9fa; padding: 10px;"></pre>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        // Capture console logs
        const originalLog = console.log;
        const originalWarn = console.warn;
        const originalError = console.error;
        const consoleOutput = document.getElementById('console-output');
        
        function addToConsole(type, message) {
            const timestamp = new Date().toLocaleTimeString();
            consoleOutput.textContent += `[${timestamp}] ${type.toUpperCase()}: ${message}\n`;
            consoleOutput.scrollTop = consoleOutput.scrollHeight;
        }
        
        console.log = function(...args) {
            addToConsole('log', args.join(' '));
            originalLog.apply(console, args);
        };
        
        console.warn = function(...args) {
            addToConsole('warn', args.join(' '));
            originalWarn.apply(console, args);
        };
        
        console.error = function(...args) {
            addToConsole('error', args.join(' '));
            originalError.apply(console, args);
        };
        
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM loaded');
            
            // Check versions
            document.getElementById('bootstrap-version').textContent = 
                typeof bootstrap !== 'undefined' ? 'Loaded' : 'Not loaded';
            document.getElementById('jquery-version').textContent = 
                typeof $ !== 'undefined' ? $.fn.jquery : 'Not loaded';
            document.getElementById('dropdown-component').textContent = 
                typeof bootstrap !== 'undefined' && bootstrap.Dropdown ? 'Available' : 'Not available';
            
            // Test dropdown functionality
            const testBtn = document.getElementById('bulk-upload-test');
            if (testBtn) {
                testBtn.addEventListener('click', function(e) {
                    console.log('Test dropdown clicked');
                });
                
                testBtn.addEventListener('shown.bs.dropdown', function() {
                    console.log('Dropdown shown event fired');
                });
                
                testBtn.addEventListener('hidden.bs.dropdown', function() {
                    console.log('Dropdown hidden event fired');
                });
            }
            
            // Initialize dropdowns manually
            if (typeof bootstrap !== 'undefined' && bootstrap.Dropdown) {
                const dropdownElementList = [].slice.call(document.querySelectorAll('.dropdown-toggle'));
                const dropdownList = dropdownElementList.map(function (dropdownToggleEl) {
                    console.log('Initializing dropdown:', dropdownToggleEl.textContent.trim());
                    return new bootstrap.Dropdown(dropdownToggleEl);
                });
                console.log('Total dropdowns initialized:', dropdownList.length);
            }
        });
    </script>
</body>
</html>
