<?php\n\n/**\n * Quick status check for POS editable tax functionality\n */\n\nrequire_once __DIR__ . '/vendor/autoload.php';\n\necho \"\\n\" . str_repeat('=', 50) . \"\\n\";\necho \"POS EDITABLE TAX - STATUS CHECK\\n\";\necho str_repeat('=', 50) . \"\\n\\n\";\n\ntry {\n    // Check if required columns exist\n    $requiredColumns = [\n        'custom_tax_enabled',\n        'custom_tax_amount',\n        'tax_notes',\n        'cgst_amount',\n        'sgst_amount'\n    ];\n    \n    echo \"📊 DATABASE SCHEMA:\\n\";\n    foreach ($requiredColumns as $column) {\n        $exists = \\Illuminate\\Support\\Facades\\Schema::hasColumn('pos_sales', $column);\n        echo \"   {$column}: \" . ($exists ? 'EXISTS ✅' : 'MISSING ❌') . \"\\n\";\n    }\n    \n    echo \"\\n🔧 MODEL CONFIGURATION:\\n\";\n    $model = new \\App\\Models\\PosSale();\n    $fillable = $model->getFillable();\n    $casts = $model->getCasts();\n    \n    $modelFields = ['custom_tax_enabled', 'custom_tax_amount', 'tax_notes'];\n    foreach ($modelFields as $field) {\n        $isFillable = in_array($field, $fillable);\n        echo \"   {$field} fillable: \" . ($isFillable ? 'YES ✅' : 'NO ❌') . \"\\n\";\n    }\n    \n    $booleanCast = isset($casts['custom_tax_enabled']) && $casts['custom_tax_enabled'] === 'boolean';\n    echo \"   custom_tax_enabled cast: \" . ($booleanCast ? 'BOOLEAN ✅' : 'MISSING ❌') . \"\\n\";\n    \n    echo \"\\n🎨 UI ASSETS:\\n\";\n    $cssExists = file_exists(__DIR__ . '/public/css/pos-enhanced-tax.css');\n    echo \"   Enhanced CSS: \" . ($cssExists ? 'EXISTS ✅' : 'MISSING ❌') . \"\\n\";\n    \n    $posViewExists = file_exists(__DIR__ . '/resources/views/admin/pos/index.blade.php');\n    echo \"   POS View: \" . ($posViewExists ? 'EXISTS ✅' : 'MISSING ❌') . \"\\n\";\n    \n    // Check if view contains toggle\n    if ($posViewExists) {\n        $viewContent = file_get_contents(__DIR__ . '/resources/views/admin/pos/index.blade.php');\n        $hasToggle = strpos($viewContent, 'customTaxToggle') !== false;\n        echo \"   Tax Toggle: \" . ($hasToggle ? 'IMPLEMENTED ✅' : 'MISSING ❌') . \"\\n\";\n        \n        $hasTaxNotes = strpos($viewContent, 'taxNotesSection') !== false;\n        echo \"   Tax Notes: \" . ($hasTaxNotes ? 'IMPLEMENTED ✅' : 'MISSING ❌') . \"\\n\";\n    }\n    \n    echo \"\\n📁 SETUP FILES:\\n\";\n    $setupExists = file_exists(__DIR__ . '/activate-pos-editable-tax.bat');\n    echo \"   Setup Script: \" . ($setupExists ? 'AVAILABLE ✅' : 'MISSING ❌') . \"\\n\";\n    \n    $testExists = file_exists(__DIR__ . '/test_pos_editable_tax.php');\n    echo \"   Test Script: \" . ($testExists ? 'AVAILABLE ✅' : 'MISSING ❌') . \"\\n\";\n    \n    $docsExist = file_exists(__DIR__ . '/POS_EDITABLE_TAX_IMPLEMENTATION.md');\n    echo \"   Documentation: \" . ($docsExist ? 'AVAILABLE ✅' : 'MISSING ❌') . \"\\n\";\n    \n    echo \"\\n\" . str_repeat('-', 50) . \"\\n\";\n    \n    // Overall status\n    $allSchemaExists = true;\n    foreach ($requiredColumns as $column) {\n        if (!\\Illuminate\\Support\\Facades\\Schema::hasColumn('pos_sales', $column)) {\n            $allSchemaExists = false;\n            break;\n        }\n    }\n    \n    $allModelConfigured = in_array('custom_tax_enabled', $fillable) && \n                         in_array('custom_tax_amount', $fillable) && \n                         in_array('tax_notes', $fillable) && \n                         $booleanCast;\n    \n    if ($allSchemaExists && $allModelConfigured && $cssExists && $posViewExists) {\n        echo \"✅ SYSTEM STATUS: FULLY IMPLEMENTED AND READY\\n\";\n        echo \"\\n🚀 HOW TO USE:\\n\";\n        echo \"   1. Go to Admin Panel > Point of Sale\\n\";\n        echo \"   2. Add products to cart\\n\";\n        echo \"   3. Find the tax section with toggle switch\\n\";\n        echo \"   4. Toggle 'Manual' to enable custom tax entry\\n\";\n        echo \"   5. Enter custom tax amount and notes\\n\";\n        echo \"   6. Complete sale normally\\n\";\n        \n        echo \"\\n💡 FEATURES:\\n\";\n        echo \"   • Auto Mode: Tax calculated from product percentages\\n\";\n        echo \"   • Manual Mode: Enter any custom tax amount\\n\";\n        echo \"   • Tax Notes: Add explanations for custom entries\\n\";\n        echo \"   • Visual Feedback: Clear UI indicators\\n\";\n        echo \"   • Full Audit Trail: All changes tracked\\n\";\n        \n    } else {\n        echo \"⚠️  SYSTEM STATUS: INCOMPLETE SETUP\\n\";\n        echo \"\\n🔧 TO COMPLETE SETUP:\\n\";\n        \n        if (!$allSchemaExists) {\n            echo \"   1. Run database migration:\\n\";\n            echo \"      activate-pos-editable-tax.bat\\n\";\n        }\n        \n        if (!$allModelConfigured) {\n            echo \"   2. Update PosSale model configuration\\n\";\n        }\n        \n        if (!$cssExists || !$posViewExists) {\n            echo \"   3. Ensure all UI files are in place\\n\";\n        }\n        \n        echo \"   4. Run: test_pos_editable_tax.php to verify\\n\";\n    }\n    \n    echo \"\\n📍 ADMIN ACCESS:\\n\";\n    echo \"   Admin Panel > Point of Sale\\n\";\n    echo \"   Look for 'Manual' toggle in tax section\\n\";\n    \n} catch (Exception $e) {\n    echo \"❌ ERROR: \" . $e->getMessage() . \"\\n\";\n    echo \"\\n🔧 SOLUTION:\\n\";\n    echo \"   Run: activate-pos-editable-tax.bat\\n\";\n}\n\necho \"\\n\" . str_repeat('=', 50) . \"\\n\";\n"